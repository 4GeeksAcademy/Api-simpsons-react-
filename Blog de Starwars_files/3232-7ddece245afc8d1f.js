"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3232],{3232:function(e,t,i){var o=i(50265),r=i(38256),n=i.n(r),a=i(26363),l=i(15412),s=i(42166),d=i(49e3),c=i(30793),u=i(31826),h=i(83505),g=i(90207),p=i(76392),x=i(29992),m=i(58681),f=i(59979),j=i(10911),w=i(18964),b=i(82825),v=i(38006),C=i(93502),y=i(22407),k=i(12509),S=i(5594),z=i(24143),L=i(89648),Z=i(84666),I=i(87488),R=i(69574),_=i(58653),A=i(9269),B=i(28849);function LogIn(e){let{hideLabel:t,actionfontSize:i,callBack:r,disableRedirect:n}=e,{t:E,lang:T}=(0,l.Z)("login"),D=(0,C.useRouter)(),{query:F,pathname:J}=D,[N,V]=(0,a.useState)({valid:!1,loading:!1,error:null,status:null}),[H,q]=(0,a.useState)(!1),[K,O]=(0,a.useState)(!1),[P,G]=(0,a.useState)(1),M=(0,a.useRef)(null),{login:U}=(0,Z.Z)(),{createToast:W}=(0,A.Z)({toastId:"invitation-toast-send"}),[Q,X]=(0,a.useState)(!1),{hexColor:Y,borderColor:$}=(0,I.Z)();(0,a.useEffect)(()=>{let{error:e}=F;if("google-user-not-found"===e){O(!0);let e=new URLSearchParams(F);e.delete("error"),D.replace({pathname:J,query:e.toString()},void 0,{shallow:!0})}},[F]),(0,a.useEffect)(()=>{2===P&&M.current&&M.current.focus()},[P]);let validateEmail=async e=>{try{V({valid:!1,loading:!0,error:null,status:null});let t=await k.Z.auth().verifyEmail(e,T);if(t.status&&t.status>=400){let e=t.data;V({valid:!1,loading:!1,error:e.detail,status:t.status})}else V({valid:!0,loading:!1,error:null,status:t.status}),G(2)}catch(e){console.log(e),V({valid:!1,loading:!1,error:"string"==typeof e?e:e.message,status:null})}},sendConfirmationLink=async e=>{try{let t=await k.Z.auth().resendConfirmationEmail(e);if((null==t?void 0:t.status)===200)X(!0),W({position:"top",title:E("invitation-sended"),status:"success",duration:9e3,isClosable:!0});else{let{data:e}=t;W({position:"top",title:e.detail,status:"error",duration:9e3,isClosable:!0})}}catch(e){console.log(e),W({position:"top",title:E("invitation-error"),status:"error",duration:9e3,isClosable:!0})}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v.J9,{initialValues:{email:"",password:""},onSubmit:(e,t)=>{U(e,n).then(()=>{t.setSubmitting(!1),r()}).catch(()=>{t.setSubmitting(!1),W({position:"top",title:E("alert-message:account-not-found"),status:"error",duration:9e3,isClosable:!0})})},validationSchema:L.Z.login,children:e=>{let{isSubmitting:r,values:n,setFieldTouched:a}=e;return(0,o.jsxs)(v.l0,{children:[(0,o.jsxs)(s.K,{display:1!==P&&"none",spacing:4,justifyContent:"space-between",children:[(0,o.jsxs)(d.z,{as:"a",href:_.FJ?"".concat(R.k1,"/v1/auth/google?url=").concat(window.location.href):"#",cursor:"pointer",variant:"outline",weight:"700",width:"100%",onClick:()=>{(0,y._1)({dataLayer:{event:"login",path:"/login",method:"google",agent:(0,_.S7)()}})},children:[(0,o.jsx)(S.Z,{icon:"google",width:"18px",height:"18px"}),(0,o.jsx)(z.Z,{as:"span",size:"md",marginLeft:"10px",textTransform:"uppercase",children:E("login-with-google")})]}),(0,o.jsxs)(d.z,{as:"a",href:_.FJ?"".concat(R.k1,"/v1/auth/github?url=").concat(window.location.href):"#",cursor:"pointer",variant:"outline",weight:"700",width:"100%",onClick:()=>{(0,y._1)({dataLayer:{event:"login",path:"/login",method:"github",agent:(0,_.S7)()}})},children:[(0,o.jsx)(S.Z,{icon:"github",width:"18px",height:"18px"}),(0,o.jsx)(z.Z,{as:"span",size:"md",marginLeft:"10px",textTransform:"uppercase",children:E("login-with-github")})]}),(0,o.jsxs)(c.xu,{display:"flex",justifyContent:"center",width:"100%",children:[(0,o.jsx)(c.xu,{borderBottom:"solid 1px",borderColor:$,width:"100%",marginRight:"13px",marginBottom:"9px"}),(0,o.jsx)(c.xu,{color:"gray.default",children:E("common:word-connector.or")}),(0,o.jsx)(c.xu,{borderBottom:"solid 1px",borderColor:$,width:"100%",marginLeft:"14px",marginBottom:"9px"})]}),(0,o.jsx)(v.gN,{name:"email",autoComplete:"email",children:e=>{let{field:i,form:r}=e;return(0,o.jsxs)(u.NI,{isInvalid:r.errors.email&&r.touched.email,onChange:()=>{V({valid:!1,loading:!1,error:null,status:null})},children:[!t&&(0,o.jsx)(h.l,{margin:"0px",color:"gray.default",fontSize:"sm",float:"left",htmlFor:"email",children:E("common:email")}),(0,o.jsx)(g.I,{...i,type:"email",id:"email",autoComplete:"email",placeholder:t?E("common:email"):"email@example.co",height:"50px",borderColor:"gray.default",borderRadius:"3px"}),(0,o.jsx)(p.J1,{children:r.errors.email})]})}}),N.error&&!Q&&(0,o.jsxs)(z.Z,{marginTop:"5px !important",color:Y.danger,children:[N.error,403===N.status&&(0,o.jsxs)(o.Fragment,{children:[",","  ",(0,o.jsx)(d.z,{textDecoration:"underline",padding:"0",color:Y.danger,variant:"link",onClick:()=>sendConfirmationLink(n.email),children:E("validation-link")})]})]}),Q?(0,o.jsx)(c.xu,{padding:"5px",borderRadius:"5px",background:Y.featuredColor,children:(0,o.jsx)(z.Z,{size:"md",marginLeft:"10px",children:E("invitation-message")})}):(0,o.jsx)(d.z,{width:"100%",isLoading:N.loading,isDisabled:!(0,_.vV)(n.email),variant:"default",fontSize:i||"l",type:"submit",onClick:()=>{1===P&&((0,_.vV)(n.email)?validateEmail(n.email):a("email",!0,!0))},children:E("next")})]}),(0,o.jsxs)(s.K,{display:2!==P&&"none",spacing:4,justifyContent:"space-between",children:[(0,o.jsx)(z.Z,{textAlign:"left",children:(0,o.jsxs)(d.z,{size:"xs",onClick:()=>G(1),variant:"link",children:["â†","  ",E("common:go-back")]})}),(0,o.jsx)(z.Z,{size:"md",textAlign:"center",children:E("welcome",{email:n.email})}),(0,o.jsx)(v.gN,{name:"password",children:e=>{let{field:i,form:r}=e;return(0,o.jsxs)(u.NI,{marginTop:"4px !important",isInvalid:r.errors.password&&r.touched.password,children:[!t&&(0,o.jsx)(h.l,{margin:"0px",color:"gray.default",fontSize:"sm",float:"left",htmlFor:"password",children:E("common:password")}),(0,o.jsxs)(x.B,{children:[(0,o.jsx)(g.I,{...i,id:"current-password",autoComplete:"current-password",type:H?"text":"password",placeholder:t?E("common:password"):"***********",height:"50px",borderColor:"gray.default",borderRadius:"3px",ref:M}),(0,o.jsx)(m.x,{width:"2.5rem",top:"5px",right:"10px",children:(0,o.jsx)(d.z,{background:"transparent",width:"100%",height:"100%",padding:"0",onClick:()=>q(!H),_hover:{background:"transparent"},_active:{background:"transparent"},children:H?(0,o.jsx)(S.Z,{icon:"eyeOpen",color:"#A4A4A4",width:"24px",height:"24px"}):(0,o.jsx)(S.Z,{icon:"eyeClosed",color:"#A4A4A4",width:"24px",height:"24px"})})})]}),(0,o.jsx)(p.J1,{children:r.errors.password})]})}}),(0,o.jsxs)(f.k,{marginTop:"1.5rem",children:[(0,o.jsx)(j.L,{}),(0,o.jsx)(w.r,{margin:"0",color:"blue.default",fontWeight:"700",align:"right",fontSize:i,target:"_blank",rel:"noopener noreferrer",href:_.FJ?"".concat(R.k1,"/v1/auth/password/reset?url=").concat(window.location.href):"",children:E("login:forgot-password")})]}),(0,o.jsx)(d.z,{width:"100%",variant:"default",fontSize:i||"l",isLoading:r,type:"submit",children:E("login:login")})]})]})}}),(0,o.jsx)(B.default,{isOpen:K,headerStyles:{textAlign:"center"},onClose:()=>O(!1),title:E("google-error.title"),childrenDescription:(0,o.jsxs)(c.xu,{display:"flex",flexDirection:"column",alignItems:"center",gridGap:"17px",children:[(0,o.jsx)(b.q,{src:"".concat(R.k1,"/static/img/avatar-1.png"),border:"3px solid #0097CD",width:"91px",height:"91px",borderRadius:"50px"}),(0,o.jsx)(z.Z,{size:"14px",textAlign:"center",dangerouslySetInnerHTML:{__html:E("google-error.description")}})]}),closeButtonVariant:"outline",closeButtonStyles:{borderRadius:"3px",color:"#0097CD",borderColor:"#0097CD"},buttonHandlerStyles:{variant:"default"},actionHandler:()=>{D.push("/checkout"),O(!1)},handlerText:E("register")})]})}LogIn.propTypes={hideLabel:n().bool,actionfontSize:n().string,disableRedirect:n().bool,callBack:n().func},LogIn.defaultProps={hideLabel:!1,actionfontSize:"",disableRedirect:!1,callBack:()=>{}},t.Z=LogIn}}]);