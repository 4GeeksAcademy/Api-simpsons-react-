"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66083],{66083:function(e,r,n){n.d(r,{f:function(){return ProfilesSection},Z:function(){return q}});var i=n(50265),o=n(30793),t=n(82825),s=n(49e3),l=n(73432),a=n(29992),d=n(90207),c=n(58681),u=n(75434),p=n(15412),x=n(93502),h=n(38256),v=n.n(h),m=n(26363),g=n(87488),f=n(37623),b=n(5594),y=n(51466),j=n(16661),_=n(16480),S=n(12509),C=n(84666),w=n(11376),k=n(24143),A=n(83691),B=n(58653),Z=n(22407),M=n(69574),D=n(87166),R=n(3597),z=n(72125),hooks_useCanAccess=()=>{let{blockedServices:e}=(0,C.Z)();return r=>{let{fromAcademy:n,fromCohort:i,fromMentorshipService:o}=r;if(!e||!e["mentorship-service"])return{hasAccess:!0};let t=e["mentorship-service"],s=t.from_everywhere,l=n&&Array.isArray(t.from_academy)&&t.from_academy.includes(n),a=i&&Array.isArray(t.from_cohort)&&t.from_cohort.includes(i),d=o&&Array.isArray(t.from_mentorship_service)&&t.from_mentorship_service.includes(o);return{hasAccess:!s&&!l&&!a&&!d,isBlockedEverywhere:s,isBlockedByAcademy:l,isBlockedByCohort:a,isBlockedByMentorshipService:d}}};function CanAccess(e){let{fromAcademy:r,fromCohort:n,fromMentorshipService:t,children:s}=e,{t:l}=(0,p.Z)("common"),a=(0,u.ff)("rgba(218, 216, 216, 0.8)","rgba(50, 50, 50, 0.8)"),d=hooks_useCanAccess(),{hasAccess:c}=d({fromAcademy:r,fromCohort:n,fromMentorshipService:t});return c?s:(0,i.jsxs)(o.xu,{position:"relative",children:[s,(0,i.jsx)(o.xu,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",bg:a,zIndex:"10",borderRadius:"md",children:(0,i.jsx)(D.M,{height:"100%",flexDirection:"column",p:4,children:(0,i.jsx)(R.x,{cursor:"pointer",fontSize:"xl",fontWeight:"bold",textAlign:"center",children:(0,i.jsx)(z.u,{label:l("service-blocked"),children:"\uD83D\uDD12"})})})})]})}CanAccess.propTypes={fromAcademy:v().string,fromCohort:v().string,fromMentorshipService:v().string,children:v().node.isRequired},CanAccess.defaultProps={fromAcademy:null,fromCohort:null,fromMentorshipService:null};var T=n(82859),O=n(9269);function NoConsumablesCard(e){let{t:r,setMentoryProps:n,handleGetMoreMentorships:l,mentoryProps:a,disableBackButton:d=!1,...c}=e;return(0,i.jsxs)(o.xu,{display:"flex",flexDirection:"column",alignItems:"center",...c,children:[(0,i.jsxs)(f.Z,{size:"14px",textAlign:"center",lineHeight:"16.8px",justify:"center",mt:"0px",mb:"0px",children:[r("mentorship.no-mentorship"),(0,i.jsx)("br",{}),(0,i.jsx)(_.Z,{size:"14px",variant:"default",className:"link",href:r("supportSideBar.learn-more-link"),target:"_blank",rel:"noopener noreferrer",children:r("supportSideBar.learn-more")})]}),(0,i.jsx)(t.q,{width:"55px",height:"55px",margin:"16px 0",style:{userSelect:"none"},src:"/static/images/angry-avatar.png"}),(0,i.jsxs)(s.z,{display:"flex",variant:"default",fontSize:"14px",isLoading:c.isLoading,fontWeight:700,onClick:()=>l(),alignItems:"center",gridGap:"10px",children:[r("supportSideBar.get-more-mentorships"),(0,i.jsx)(b.Z,{icon:"longArrowRight",width:"24px",height:"10px",color:"currentColor"})]}),!d&&(0,i.jsx)(s.z,{variant:"link",fontSize:"14px",onClick:()=>n({}),letterSpacing:"0.05em",children:r("common:go-back")})]})}function ProfilesSection(e){let{profiles:r,size:n,max:o,...t}=e,s=r||[];return(null==r?void 0:r.length)===1&&(s=[r[0],M.FR[0],M.FR[1]]),(0,i.jsx)(l.H,{max:o||4,justifyContent:"center",size:{base:"sm",md:"md"},...t,children:null==s?void 0:s.map((e,r)=>{var o;if(!e||!e.user)return null;let t=e.user.first_name&&e.user.last_name?"".concat(e.user.first_name," ").concat(e.user.last_name):"",s=null===(o=e.user.profile)||void 0===o?void 0:o.avatar_url;return(0,i.jsx)(w.Z,{width:n||"48px",height:n||"48px",index:r,isWrapped:!0,fullName:t,avatarUrl:s,data:e,badge:!0},e.id||"profile-".concat(r))})})}function MentoringConsumables(e){var r,n,l,h,v,w,D,R;let{mentoryProps:z,width:q,consumables:P,cohortSessionIsSaaS:I,setMentoryProps:L,programServices:F,servicesFiltered:E,searchProps:N,setSearchProps:W,setProgramMentors:G,mentorsFiltered:H,allMentorsAvailable:U,subscriptionData:V,allSubscriptions:J,queryService:K,queryMentor:Q,titleSize:X,withDescription:Y}=e,{t:$}=(0,p.Z)("dashboard"),{user:ee}=(0,C.Z)(),{validatePlanExistence:er}=(0,T.Z)(),[en,ei]=(0,m.useState)(!1),eo=(0,B.qn)("accessToken"),[et,es]=(0,m.useState)(!0),{borderColor:el,lightColor:ea,hexColor:ed,backgroundColor2:ec}=(0,g.Z)(),[eu,ep]=(0,m.useState)(!1),[ex,eh]=(0,m.useState)(!1),[ev,em]=(0,m.useState)({}),[eg,ef]=(0,m.useState)({}),[eb,ey]=(0,m.useState)([]),[ej,e_]=(0,m.useState)(!0),[eS,eC]=(0,m.useState)(!1),[ew,ek]=(0,m.useState)(!0),[eA,eB]=(0,m.useState)(!0),eZ=(0,x.useRouter)(),{slug:eM}=eZ.query,{createToast:eD}=(0,O.Z)({toastId:"finding-mentor-error-service"}),eR=null==eg?void 0:null===(r=eg.balance)||void 0===r?void 0:r.unit,ez=Number(eR&&eR),eT=hooks_useCanAccess(),eO=!1===eg.available_as_saas||((null==eg?void 0:eg.balance)?(null==eg?void 0:null===(w=eg.balance)||void 0===w?void 0:w.unit)>0||(null==eg?void 0:null===(D=eg.balance)||void 0===D?void 0:D.unit)===-1:(null==P?void 0:null===(R=P.mentorship_service_sets)||void 0===R?void 0:R.length)>0&&(ez>0||-1===ez)),getMostRecentPaidAt=e=>e.reduce((e,r)=>{let n=new Date(r.paid_at);return n>e?n:e},new Date(0)),eq=Array.isArray(J)&&J.sort((e,r)=>{let n=getMostRecentPaidAt(e.invoices),i=getMostRecentPaidAt(r.invoices);return i-n}).find(e=>{var r,n;return null===(n=e.selected_mentorship_service_set)||void 0===n?void 0:null===(r=n.mentorship_services)||void 0===r?void 0:r.some(e=>{var r;return e.slug===(null==z?void 0:null===(r=z.service)||void 0===r?void 0:r.slug)})}),eP=eq||(null==J?void 0:J[0]);(0,m.useEffect)(()=>{(null==U?void 0:U.length)===0&&setTimeout(()=>{es(!1)},1500)},[U]);let manageMentorsData=(e,r)=>{var n,i,o;(0,Z._1)({dataLayer:{event:"select_mentorship_service",path:eZ.pathname,consumables_amount:ez,mentorship_service:null==e?void 0:e.slug,agent:(0,B.S7)()}});let t=P.find(r=>{var n;return null==r?void 0:null===(n=r.mentorship_services)||void 0===n?void 0:n.some(r=>(null==r?void 0:r.slug)===(null==e?void 0:e.slug))});G(r),ef({...t,balance:{unit:(null==e?void 0:null===(n=e.academy)||void 0===n?void 0:n.available_as_saas)===!1||!1===I?-1:null==t?void 0:null===(i=t.balance)||void 0===i?void 0:i.unit},available_as_saas:null==e?void 0:null===(o=e.academy)||void 0===o?void 0:o.available_as_saas}),setTimeout(()=>{L({...z,service:e})},50)},handleService=async e=>{var r,n;let i=eT({fromMentorshipService:e.slug,fromAcademy:null==e?void 0:null===(r=e.academy)||void 0===r?void 0:r.slug});if(!i.hasAccess){eD({position:"top",title:$("common:service-blocked"),status:"error",duration:5e3,isClosable:!0});return}try{if(U.length>0){let r=U.filter(r=>r.services.some(r=>r.slug===e.slug));manageMentorsData(e,r)}else{let r=await S.Z.mentorship({services:e.slug,status:"ACTIVE",syllabus:eM,academy:null==e?void 0:null===(n=e.academy)||void 0===n?void 0:n.id}).getMentor();manageMentorsData(e,r.data)}}catch(e){eD({position:"top",title:"Error",description:$("alert-message:error-finding-mentors"),status:"error",duration:7e3,isClosable:!0})}};(0,m.useEffect)(()=>{let e=E.filter(e=>U.some(r=>r.services.some(r=>r.slug===e.slug)));if(Q&&U.length>0&&!eS){let r=U.find(e=>e.slug===Q);!r&&ew&&(eD({position:"top",title:"Error",description:"".concat($("supportSideBar.mentor-not-found"),' "').concat(Q,'"'),status:"error",duration:7e3,isClosable:!0}),ek(!1)),r&&(e=E.filter(e=>r.services.some(r=>r.slug===e.slug)),G([r]))}ey(e),setTimeout(()=>{e_(!1)},2e3),!eS&&Q&&ei(!0)},[E,Q,eS]),(0,m.useEffect)(()=>{if(K&&(null==eb?void 0:eb.length)>0&&eA&&!eS){let e=eb.find(e=>e.slug===K);if(!e&&ew){eD({position:"top",title:"Error",description:"".concat($("supportSideBar.service-not-found"),' "').concat(K,'" ').concat(Q?"".concat($("common:word-connector.for"),' "').concat(Q,'"'):""),status:"error",duration:7e3,isClosable:!0}),ek(!1);return}handleService(e),ei(!0),eB(!1)}},[eS,eb]);let reportBookMentor=e=>{var r;(0,Z._1)({dataLayer:{event:"book_mentorship_session",path:eZ.pathname,consumables_amount:ez,mentorship_service:null==z?void 0:null===(r=z.service)||void 0===r?void 0:r.slug,mentor_name:"".concat(e.user.first_name," ").concat(e.user.last_name),mentor_id:e.slug,mentor_booking_url:e.booking_url,agent:(0,B.S7)()}})};return(0,i.jsxs)(o.xu,{position:"relative",width:q,height:"auto",borderWidth:"0px",borderRadius:"lg",children:[en&&(0,i.jsx)(o.xu,{position:"absolute",top:"16px",left:"18px",onClick:()=>{(null==z?void 0:z.service)?L({}):ei(!1),eC(!0)},cursor:"pointer",children:(0,i.jsx)(b.Z,{icon:"arrowLeft",width:"25px",height:"25px",color:"#606060"})}),(0,i.jsxs)(o.xu,{display:"flex",flexDirection:"column",p:"4",pt:"20px",alignItems:"center",children:[!(null==z?void 0:z.service)&&((null==P?void 0:null===(n=P.mentorship_service_sets)||void 0===n?void 0:n.length)!==0||0!==ez)&&(0,i.jsxs)(o.xu,{d:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(f.Z,{size:X||"14px",textAlign:"center",lineHeight:"16.8px",justify:"center",mt:"0px",mb:"0px",children:$("supportSideBar.mentoring")}),Y&&(0,i.jsx)(k.Z,{size:"l",mt:"5px",textAlign:"center",children:$("supportSideBar.description")}),(0,i.jsx)(k.Z,{textAlign:"center",children:(0,i.jsx)(_.Z,{size:"14px",variant:"default",className:"link",href:$("supportSideBar.learn-more-link"),target:"_blank",rel:"noopener noreferrer",children:$("supportSideBar.learn-more")})}),F.length<=0&&(0,i.jsx)(f.Z,{size:"16px",textAlign:"center",justify:"center",mt:"10px",mb:"0px",children:F.length>0?"".concat(F.length," ").concat($("supportSideBar.mentoring-available")):$("supportSideBar.no-mentoring-available")})]}),!en&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.xu,{margin:"15px 0",display:"flex",flexDirection:"column",children:[U.length>0?(0,i.jsx)(ProfilesSection,{profiles:U}):(0,i.jsxs)(i.Fragment,{children:[et&&(0,i.jsx)(A.Cu,{quantity:4}),!et&&0===U.length&&(0,i.jsx)(t.q,{width:"48px",height:"48px",margin:"0 auto",style:{userSelect:"none"},src:"/static/images/angry-avatar.png"})]}),(0,i.jsx)(k.Z,{color:ea,size:"12px",margin:"8px 0 0 0",textAlign:"center",children:$("supportSideBar.mentors-available",{count:U.length})})]}),(0,i.jsxs)(s.z,{variant:"link",fontSize:"14px",onClick:()=>{ei(!0),(0,Z._1)({dataLayer:{event:"begin_mentorship_session_schedule",path:eZ.pathname,agent:(0,B.S7)()}})},children:[$("supportSideBar.schedule-button"),(0,i.jsx)(b.Z,{icon:"longArrowRight",width:"24px",height:"10px",color:"currentColor"})]})]}),en&&(null==z?void 0:z.service)&&!(null==z?void 0:z.mentor)&&eO&&(0,i.jsxs)(o.xu,{display:"flex",alignItems:"center",fontSize:X||"18px",fontWeight:700,gridGap:"10px",padding:"0 10px",margin:"10px 0 0px 0",style:{textWrap:"nowrap"},children:[(0,i.jsx)(o.xu,{children:$("mentorship.you-have")}),(0,i.jsxs)(o.xu,{display:"flex",color:"white",justifyContent:"center",alignItems:"center",background:"green.400",width:"30px",height:"30px",borderRadius:"50%",children:[ez>0?ez:"",-1===ez?(0,i.jsx)(b.Z,{icon:"infinite",width:"20px",height:"20px"}):""]}),(0,i.jsx)(o.xu,{textAlign:"center",children:$("mentorship.available-sessions")})]}),(null==z?void 0:z.service)&&en&&!(null==z?void 0:z.mentor)&&!eO?(0,i.jsx)(NoConsumablesCard,{t:$,isLoading:ex,mentoryProps:z,handleGetMoreMentorships:()=>{var e,r,n,i,o;eh(!0);let t=(null==z?void 0:null===(e=z.service)||void 0===e?void 0:e.slug)?null==z?void 0:z.service:null==V?void 0:null===(n=V.selected_mentorship_service_set)||void 0===n?void 0:null===(r=n.mentorship_services)||void 0===r?void 0:r[0];er(J,null==eP?void 0:null===(o=eP.plans)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.slug).then(e=>{em({...e,event:"",consumableType:"mentorship",academyService:t}),ep(!0)}).finally(()=>eh(!1))},setMentoryProps:L,mt:"30px"}):en&&(0,i.jsxs)(i.Fragment,{children:[(null==z?void 0:z.service)&&(0,i.jsxs)(o.xu,{display:"flex",alignItems:"center",justifyContent:"flex-start",gridGap:"10px",background:ec,px:"20px",pt:"15px",textAlign:"center",w:"100%",borderTopRadius:"0.375rem",children:[(0,i.jsx)(o.xu,{children:(0,i.jsx)(b.Z,{icon:"checked2",width:"15px",height:"15px",color:ed.greenLight})}),(0,i.jsx)(o.xu,{width:"auto",children:z.service.name})]}),!(null==z?void 0:z.service)&&F.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.B,{mt:"15px",children:[(0,i.jsx)(d.I,{onChange:e=>{var r;return W({...N,serviceSearch:null===(r=e.target.value)||void 0===r?void 0:r.toLocaleLowerCase()})},background:ec,borderBottomRadius:"0",border:"0",placeholder:$("supportSideBar.select-type")}),(0,i.jsx)(c.x,{children:(0,i.jsx)(b.Z,{icon:"arrowDown",color:"#606060",width:"35px",height:"30px",ml:"10px"})})]}),(0,i.jsx)(o.xu,{maxHeight:"10rem",width:"100%",overflow:"auto",borderBottomRadius:"0.375rem",children:ej?(0,i.jsx)(A.q4,{withoutContainer:!0,quantity:2,height:"40px",gridGap:"20px",marginTop:"10px"}):(0,i.jsxs)(i.Fragment,{children:[eb.length>0&&eb.map(e=>{var r;return(0,i.jsx)(CanAccess,{fromMentorshipService:e.slug,fromAcademy:null==e?void 0:null===(r=e.academy)||void 0===r?void 0:r.slug,children:(0,i.jsx)(o.xu,{borderTop:"1px solid",cursor:"pointer",onClick:()=>handleService(e),borderColor:el,py:"14px",background:ec,width:"100%",px:"22px",_hover:{background:(0,u.ff)("featuredLight","gray.700")},children:e.name})},e.slug)}),0===eb.length&&(0,i.jsx)(o.xu,{borderTop:"1px solid",borderColor:el,py:"14px",background:ec,width:"100%",px:"22px",children:$("common:search-not-found")})]})})]}),(null==z?void 0:z.service)&&!(null==z?void 0:z.mentor)&&(0,i.jsx)(CanAccess,{fromMentorshipService:null==z?void 0:null===(l=z.service)||void 0===l?void 0:l.slug,fromAcademy:null==z?void 0:null===(v=z.service)||void 0===v?void 0:null===(h=v.academy)||void 0===h?void 0:h.slug,children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.B,{mt:"15px",borderBottom:"1px solid",borderColor:el,children:[(0,i.jsx)(d.I,{onChange:e=>{var r;return W({...N,mentorSearch:null===(r=e.target.value)||void 0===r?void 0:r.toLowerCase()})},background:ec,borderBottomRadius:"0",border:"0",placeholder:$("supportSideBar.search-mentor")}),(0,i.jsx)(c.x,{children:(0,i.jsx)(b.Z,{icon:"arrowDown",color:"#606060",width:"35px",height:"30px",ml:"10px"})})]}),(0,i.jsx)(o.xu,{maxHeight:"18rem",width:"100%",background:ec,overflow:"auto",borderBottomRadius:"0.375rem",children:H.length>0?H.map((e,r)=>{var n,t,s,l,a;return(0,i.jsxs)(m.Fragment,{children:[0!==r&&(0,i.jsx)(o.xu,{as:"hr",borderColor:"gray.300",margin:"0 18px"}),(0,i.jsxs)(o.xu,{display:"flex",gridGap:"18px",flexDirection:"row",py:"14px",width:"100%",px:"18px",_hover:{background:(0,u.ff)("featuredLight","gray.700")},children:[(0,i.jsx)(y.Z,{src:null==e?void 0:null===(n=e.user.profile)||void 0===n?void 0:n.avatar_url,alt:"".concat(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.first_name," ").concat(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.last_name),width:78,height:78,objectFit:"cover",style:{minWidth:"78px",width:"78px !important",height:"78px !important"},styleImg:{borderRadius:"50px"}}),(0,i.jsxs)(o.xu,{display:"flex",flexDirection:"column",width:"100%",children:[(0,i.jsx)(o.xu,{fontSize:"15px",fontWeight:"600",children:"".concat(e.user.first_name," ").concat(e.user.last_name)}),(0,i.jsx)(o.xu,{as:"hr",borderColor:el,my:"5px"}),(0,i.jsxs)(o.xu,{children:[e.one_line_bio&&""!==e.one_line_bio?"".concat(e.one_line_bio," "):"",(null==e?void 0:e.booking_url)?(0,i.jsx)(_.Z,{variant:"default",onClick:()=>reportBookMentor(e),href:"".concat(M.k1,"/mentor/").concat(null==e?void 0:e.slug,"?utm_campaign=").concat(null==z?void 0:null===(l=z.service)||void 0===l?void 0:l.slug,"&utm_source=4geeks&salesforce_uuid=").concat(null==ee?void 0:ee.id,"&token=").concat(eo),target:"_blank",rel:"noopener noreferrer",children:$("supportSideBar.create-session-text")}):(0,i.jsx)(o.xu,{fontSize:"15px",children:$("supportSideBar.no-mentor-link")})]})]})]})]},null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.id)}):(0,i.jsx)(o.xu,{borderTop:"1px solid",borderColor:el,py:"14px",background:ec,width:"100%",px:"22px",children:$("supportSideBar.no-mentors")})})]})})]})]}),(0,i.jsx)(j.Z,{isOpen:eu,stage:j.B.outOfConsumables,externalData:ev,onClose:()=>{ep(!1)}})]})}MentoringConsumables.propTypes={mentoryProps:v().objectOf(v().oneOfType([v().any,v().string])),width:v().string,titleSize:v().string,queryService:v().string,queryMentor:v().string,consumables:v().objectOf(v().oneOfType([v().any])),setMentoryProps:v().func.isRequired,programServices:v().arrayOf(v().oneOfType([v().any,v().string])),servicesFiltered:v().arrayOf(v().oneOfType([v().any,v().string])).isRequired,searchProps:v().objectOf(v().oneOfType([v().any,v().string])).isRequired,setSearchProps:v().func.isRequired,setProgramMentors:v().func,mentorsFiltered:v().arrayOf(v().oneOfType([v().any])).isRequired,subscriptionData:v().objectOf(v().oneOfType([v().any])),allSubscriptions:v().arrayOf(v().oneOfType([v().any])),withDescription:v().bool},MentoringConsumables.defaultProps={queryService:void 0,queryMentor:void 0,titleSize:void 0,mentoryProps:[],width:"100%",consumables:{},programServices:[],setProgramMentors:()=>{},subscriptionData:{},allSubscriptions:[],withDescription:!1};var q=MentoringConsumables}}]);